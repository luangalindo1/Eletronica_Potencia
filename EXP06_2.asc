Version 4
SHEET 1 1624 680
WIRE 1072 -112 672 -112
WIRE 1072 -80 1072 -112
WIRE 992 0 880 0
WIRE 1024 0 992 0
WIRE 672 48 672 -112
WIRE 880 48 880 0
WIRE 992 48 992 0
WIRE 80 96 80 80
WIRE 80 96 -16 96
WIRE 1312 96 1296 96
WIRE 1456 96 1392 96
WIRE 1568 96 1456 96
WIRE 80 112 80 96
WIRE -16 128 -16 96
WIRE 1456 128 1456 96
WIRE 1568 128 1568 96
WIRE 880 176 880 128
WIRE 992 176 992 128
WIRE 992 176 880 176
WIRE 1072 176 1072 16
WIRE 1072 176 992 176
WIRE 672 208 672 128
WIRE 720 208 672 208
WIRE 1072 208 1072 176
WIRE 1072 208 1024 208
WIRE 1072 224 1072 208
WIRE 1456 240 1456 192
WIRE 1456 240 1296 240
WIRE 1568 240 1568 208
WIRE 1568 240 1456 240
WIRE 224 256 -16 256
WIRE 352 272 288 272
WIRE 400 272 352 272
WIRE 224 288 144 288
WIRE 992 304 880 304
WIRE 1024 304 992 304
WIRE -16 352 -16 256
WIRE 144 352 144 288
WIRE 672 352 672 208
WIRE 880 352 880 304
WIRE 992 352 992 304
WIRE -16 448 -16 432
WIRE 144 448 144 432
WIRE 880 480 880 432
WIRE 992 480 992 432
WIRE 992 480 880 480
WIRE 1072 480 1072 320
WIRE 1072 480 992 480
WIRE 672 528 672 432
WIRE 1072 528 1072 480
WIRE 1072 528 672 528
FLAG -16 128 0
FLAG -16 448 0
FLAG 144 448 0
FLAG 400 304 0
FLAG 80 0 +12
FLAG 256 240 +12
FLAG 80 192 -12
FLAG 256 304 -12
FLAG 464 256 q1
FLAG 464 288 q1/
FLAG -16 256 vt
FLAG 144 288 vc
FLAG 832 112 0
FLAG 832 416 0
FLAG 1296 240 0
FLAG 720 208 0
FLAG 832 64 q1
FLAG 832 368 q1/
FLAG 1296 96 1
FLAG 1024 208 1
FLAG 672 -112 +bar
FLAG 672 528 -bar
FLAG 1456 96 out
FLAG 352 272 pwm
SYMBOL voltage 80 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage 80 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL voltage -16 336 R0
WINDOW 3 -16 156 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(-10 10 0 {1/(2*fs)} {1/(2*fs)} 0 {1/fs})
SYMBOL voltage 144 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(0 9 60)
SYMBOL voltage 672 32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 100
SYMBOL OpAmps\\UniversalOpAmp2 256 272 R0
SYMATTR InstName U1
SYMBOL Digital\\buf 400 208 R0
SYMATTR InstName A1
SYMBOL e 880 32 R0
SYMATTR InstName E1
SYMATTR Value 15
SYMBOL nmos 1024 -80 R0
SYMATTR InstName M1
SYMATTR Value IRF530
SYMBOL res 976 32 R0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL voltage 672 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 100
SYMBOL e 880 336 R0
SYMATTR InstName E2
SYMATTR Value 15
SYMBOL nmos 1024 224 R0
SYMATTR InstName M2
SYMATTR Value IRF530
SYMBOL res 976 336 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL ind 1296 112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 3.3m
SYMBOL cap 1440 128 R0
SYMATTR InstName C1
SYMATTR Value 8µ
SYMATTR SpiceLine Rser=0.01
SYMBOL res 1552 112 R0
SYMATTR InstName R3
SYMATTR Value 10
TEXT -32 536 Left 2 !.tran 100m
TEXT -32 568 Left 2 !.param fs = 10k
